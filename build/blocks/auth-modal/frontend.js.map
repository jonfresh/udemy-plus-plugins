{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":"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","sources":["webpack://udemy-plus/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    const openModalBtn = document.querySelectorAll('.open-modal')\n    const modalEl = document.querySelector('.wp-block-udemy-plus-auth-modal')\n    const modalCloseEl = document.querySelectorAll('.modal-overlay, .modal-btn-close')\n\n    openModalBtn.forEach(el => {\n        el.addEventListener('click', event => {\n            event.preventDefault()\n            modalEl.classList.add('modal-show')\n        })\n\n    })\n\n    modalCloseEl.forEach(el => {\n        el.addEventListener('click', event => {\n            event.preventDefault()\n            modalEl.classList.remove('modal-show')\n        })\n        document.addEventListener('keydown', event => {\n            if (event.key === \"Escape\") {\n                modalEl.classList.remove('modal-show')\n            }\n        });\n    })\n\n    const tabs = document.querySelectorAll('.tabs a')\n    const signinForm = document.querySelector('#signin-tab')\n    const signupForm = document.querySelector('#signup-tab')\n\n    tabs.forEach(tab => {\n        tab.addEventListener('click', event => {\n            event.preventDefault()\n            tabs.forEach(currentTab => {\n                currentTab.classList.remove('active-tab')\n            })\n\n            event.currentTarget.classList.add('active-tab')\n            const activeTab = event.currentTarget.getAttribute('href')\n\n                if (activeTab === '#signin-tab') {\n                    signinForm.style.display = 'block'\n                    signupForm.style.display = 'none'\n                } else {\n                    signinForm.style.display = 'none'\n                    signupForm.style.display = 'block'\n                }\n\n        })\n    })\n\n    signupForm.addEventListener('submit', async event => {\n        event.preventDefault()\n\n        const signupFieldset = signupForm.querySelector('fieldset')\n        const signupStatus = signupForm.querySelector('#signup-status')\n        signupFieldset.setAttribute('disabled', true)\n\n\n        signupStatus.innerHTML = `\n            <div class=\"modal-status modal-status-info\">\n            Please wait. We are creating your account.\n            </div>\n        `\n\n        const formData = {\n            username: signupForm.querySelector('#su-name').value,\n            email: signupForm.querySelector('#su-email').value,\n            password: signupForm.querySelector('#su-password').value\n        }\n\n        const response = await fetch(up_auth_rest.signup, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n\n        const responseJSON = await response.json()\n\n        if(responseJSON.status === 2) {\n            signupStatus.innerHTML = `\n                <div class=\"modal-status modal-status-success\">\n                    Success! Your account has been created.\n                </div>\n            `\n            location.reload()\n        } else {\n            signupFieldset.removeAttribute('disabled')\n            signupStatus.innerHTML = `<div class=\"modal-status modal-status-danger\">Unable to create account! Please try again later.</div>`\n        };\n    }) \n\n    signinForm.addEventListener('submit', async event => {\n        event.preventDefault()\n\n        const signinFieldset = signinForm.querySelector('fieldset')\n        const signinStatus = signinForm.querySelector('#signin-status')\n        signinFieldset.setAttribute('disabled', true)\n\n\n        signinStatus.innerHTML = `\n            <div class=\"modal-status modal-status-info\">\n            Please wait. We are logging you in.\n            </div>\n        `\n\n        const formData = {\n            user_login: signinForm.querySelector('#si-email').value,\n            password: signinForm.querySelector('#si-password').value\n        }\n\n        const response = await fetch(up_auth_rest.signin, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n\n        const responseJSON = await response.json()\n\n        if(responseJSON.status === 2) {\n            signinStatus.innerHTML = `\n                <div class=\"modal-status modal-status-success\">\n                    Success! Signing you in.\n                </div>\n            `\n            location.reload()\n        } else {\n            signinFieldset.removeAttribute('disabled')\n            signinStatus.innerHTML = `<div class=\"modal-status modal-status-danger\">Unable to sign in! Please try again later.</div>`\n        };\n    }) \n})"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalEl","querySelector","modalCloseEl","forEach","el","event","preventDefault","classList","add","remove","key","tabs","signinForm","signupForm","tab","currentTab","currentTarget","activeTab","getAttribute","style","display","signupFieldset","signupStatus","setAttribute","innerHTML","formData","username","value","email","password","response","fetch","up_auth_rest","signup","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","user_login","signin"],"sourceRoot":""}